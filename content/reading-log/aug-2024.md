---
title: August 2024
date: '2024-08-01'
summary: 'CPU caches and false sharing; dynamic dispatch with vtables; property-based testing; why π² is approximately g; and more...'
description: 'CPU caches and false sharing; dynamic dispatch with vtables; property-based testing; why π² is approximately g; and more...'
hidemeta: true
katex: true
---

## Programming

- [CPU Cache][cpu-cache]
  - I've been meaning to read about CPU caches for some time; the post below on false sharing
    popping up on my HN feed finally pushed me to do it. My takeaways:
    - Modern CPUs comprise multiple cores, which can run concurrently.
    - Accessing RAM is slow, so there are various hardware caches that are physically closer to
      cores and store recently accessed data.
    - Caches are arranged in levels: L1 is fastest to access, is usually per-core, and has the smallest size.
      L2 cache is larger but slower to access, and so on. Since some cache levels are per-core, there needs to
      be some synchronization mechanism (ensuring _cache coherence_.)
    - Within a cache, data is organized along cache lines---chunks of contiguous memory; when reading an address, the whole cache line is loaded.
- [This is your brain on false sharing][false-sharing]
- [Rust Deep Dive: Borked Vtables and Barking Cats][rust-barking-cats]
  - Unsafely accessing and manipulating the vtable of dyn trait objects in Rust.
    For fun, I then [did the same thing in Go](https://go.dev/play/p/KG0CHGD1GST).
- [Go Data Structures: Interfaces][go-ifaces]
- [fast-check: how it works][fc-internals]
  - A deep dive into the internals of property-based testing frameworks; I really enjoyed the discussion of shrinking (which still feels like pure magic, even after learning how it's implemented!)

[cpu-cache]: https://paul.bone.id.au/blog/2019/05/01/cpu-cache/
[false-sharing]: https://unskilled.blog/posts/this-is-your-brain-on-false-sharing/
[rust-barking-cats]: https://geo-ant.github.io/blog/2023/rust-dyn-trait-objects-fat-pointers/
[go-ifaces]: https://research.swtch.com/interfaces
[fc-internals]: https://github.com/dubzzz/fast-check/blob/b824abf8eaa0daae372f299ae59cfe8ba1dc7b83/packages/fast-check/documentation/HowItWorks.md

## Math

- [A wonderful coincidence or an expected connection: why $\pi^2 \approx g$][pi-squared-approx-g]

  - I'd always written off $\pi^2 \approx 9.87$ being close to $g = \pu{9.81 m s^-2}$ as a fluke of
    nature, but this is not so---the meter was originally defined by the length of a pendulum with
    period $\pu{2 s}$, and hence
    $$ T = 2\pi \sqrt\frac{L}{g} $$
  means at some point $\pi^2$ was _exactly_ equal to $g$ expressed in $\pu{m s^-2}$.

- [Quanta Magazine: Grad Students Find Inevitable Patterns in Big Sets of Numbers][quanta-arith-progressions]

[pi-squared-approx-g]: https://roitman.io/blog/91
[quanta-arith-progressions]: https://www.quantamagazine.org/grad-students-find-inevitable-patterns-in-big-sets-of-numbers-20240805/
